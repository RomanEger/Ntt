@model (NttTest.ViewModels.ProductViewModel, SelectList)
@{
    ViewData["Title"] = "Управление товарами";
}

<div class="container text-center"> 
    <label>Название</label>
    <input id="title" required class="w-100 mb-3" type="text" asp-for="Item1.Title"/><br/>
    <label>Описание</label>
    <textarea id="description" class="w-100 mb-3" type="text" asp-for="Item1.Description"></textarea><br/>
    <label>Цена</label>
    <input id="price" required pattern="^[0-9]+([\\,|\\.][0-9]+)?$" class="w-100 mb-3" type="text" asp-for="Item1.Price"/><br/>
    <label>Количество</label>
    <input id="quantity" required pattern="[0-9]+" class="w-100 mb-3" type="text" asp-for="Item1.Quantity"/><br/>
    <label>Категория</label>
    <select id="category" required class="w-100 mb-3" asp-for="Item1.Category" asp-items="@Model.Item2"></select><br/>
    <button type="submit" class="btn-primary rounded-3" onclick="send()">Сохранить</button>
</div>

<script>
        
    async function send() {
        const id = @Model.Item1.Id
        const title = document.getElementById('title').value
        const description = document.getElementById('description')?.value ?? ''
        const price = document.getElementById('price').value
        const quantity = document.getElementById('quantity').value
        const category = document.getElementById('category').value
        const product = {
            id,
            title,
            description,
            price,
            quantity,
            category
        }
        const productViewModel = JSON.stringify(product)
        console.log(productViewModel)
        await fetch("/Home/product", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: productViewModel  
        })
        window.location.replace("/Home/")
    }
</script>